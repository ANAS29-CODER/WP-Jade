!function(){const t={WIDTH:"width",HEIGHT:"height"};class e{constructor(t,e){this.element=t,this.settings=e,this.maxBucketWidth=0,this.setup()}getGutter(){if(!this.settings.MOBILE_SCREEN_WIDTH||!this.settings.MOBILE_GUTTER)return this.settings.GUTTER;return window.innerWidth<this.settings.MOBILE_SCREEN_WIDTH?this.settings.MOBILE_GUTTER:this.settings.GUTTER}getBucketWidth(t,e=0){let s=0;return t.length&&(s=this.getGutter()*(t.length-1),t.forEach((t=>{s+=t.width}))),s+=e,s}getBuckets(e){let s=[],i=parseFloat(window.getComputedStyle(this.element).width);i=Math.floor(i),this.maxBucketWidth=this.settings.ROW_MAX_WIDTH||i;let h={items:[],width:0,height:0,isLast:!1,scale:0};return e.forEach((e=>{Object.assign(e.style,{width:"auto",float:"left",position:"relative",clear:"none",marginTop:0,marginLeft:0});let i=parseInt(e.dataset[t.HEIGHT]),a=parseInt(e.dataset[t.WIDTH]),n=this.settings.ROW_MIN_HEIGHT/i,r={element:e,originalHeight:i,originalWidth:a,aspect:a/i,scale:n,width:Math.floor(a*n),height:Math.floor(i*n)};this.getBucketWidth(h.items,r.width)>this.maxBucketWidth&&(s.push(h),h={items:[],width:0,height:0,isLast:!1,scale:0}),h.items.push(r)})),s.push(h),h.isLast=!0,s}updateItemStyles(t){t.forEach(((t,e)=>{let s;t.isLast||(t.scale=(this.maxBucketWidth-(t.items.length-1)*this.getGutter())/this.getBucketWidth(t.items)),t.items.forEach(((e,i)=>{t.scale&&(e.width=Math.floor(e.width*t.scale),e.height=Math.floor(e.height*t.scale)),s=e,Object.assign(e.element.style,{height:e.height+"px",width:e.width+"px",marginTop:this.getGutter()+"px"}),i>0?e.element.style.marginLeft=this.getGutter()+"px":e.element.style.clear="left"})),s&&(s.width=s.width+this.maxBucketWidth-this.getBucketWidth(t.items),s.element.style.width=s.width+"px")}))}setup(){this.updateItems(),this.element.dataset.masonry="masonry",window.addEventListener("resize",(()=>{this.updateItems()}))}updateItems(t=null){t=t||Array.from(this.element.children);let e=this.getBuckets(t);this.updateItemStyles(e)}addItems(t){this.element.append(...t),this.updateItems(t)}}new class{constructor(){this.galleries=window.acfViewsMasonry||[],this.galleries?"loading"===document.readyState?document.addEventListener("DOMContentLoaded",this.setup.bind(this)):this.setup():console.log("ACF Views: Galleries data is missing")}setup(){let t=!1;this.galleries.forEach((s=>{if(!(s.hasOwnProperty("selector")&&s.hasOwnProperty("rowMinHeight")&&s.hasOwnProperty("gutter")&&s.hasOwnProperty("mobileGutter")))return void(t=!0);let i=document.querySelector(s.selector);i&&new e(i,{ROW_MIN_HEIGHT:s.rowMinHeight,GUTTER:s.gutter,MOBILE_GUTTER:s.mobileGutter,MOBILE_WIDTH:992})})),t&&console.log("ACF Views: Galleries data is wrong")}}}();